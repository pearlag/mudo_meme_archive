// This file is automatically generated. Do not edit it directly.
"use client";

import { createClient } from '@supabase/supabase-js';
import type { Database } from './types';

// Next.jsì—ì„œëŠ” process.envë¥¼ ì‚¬ìš©í•˜ê³ , í´ë¼ì´ì–¸íŠ¸ì—ì„œ ì ‘ê·¼í•˜ë ¤ë©´ NEXT_PUBLIC_ ì ‘ë‘ì‚¬ê°€ í•„ìš”í•©ë‹ˆë‹¤
// ë¹Œë“œ íƒ€ì„ì— í™˜ê²½ ë³€ìˆ˜ê°€ ë²ˆë“¤ì— í¬í•¨ë˜ë¯€ë¡œ, ëŸ°íƒ€ì„ì— í™•ì¸ ê°€ëŠ¥
const SUPABASE_URL = process.env.NEXT_PUBLIC_SUPABASE_URL || '';
const SUPABASE_PUBLISHABLE_KEY = process.env.NEXT_PUBLIC_SUPABASE_PUBLISHABLE_KEY || '';

// ë””ë²„ê¹…: í™˜ê²½ ë³€ìˆ˜ í™•ì¸ (ê°œë°œ í™˜ê²½ì—ì„œë§Œ)
if (typeof window !== 'undefined') {
  console.log('ğŸ” í™˜ê²½ ë³€ìˆ˜ í™•ì¸:', {
    hasUrl: !!SUPABASE_URL,
    hasKey: !!SUPABASE_PUBLISHABLE_KEY,
    urlLength: SUPABASE_URL.length,
    keyLength: SUPABASE_PUBLISHABLE_KEY.length,
    urlPreview: SUPABASE_URL ? `${SUPABASE_URL.substring(0, 20)}...` : '(ì—†ìŒ)',
    keyPreview: SUPABASE_PUBLISHABLE_KEY ? `${SUPABASE_PUBLISHABLE_KEY.substring(0, 10)}...` : '(ì—†ìŒ)',
  });
}

// í™˜ê²½ ë³€ìˆ˜ê°€ ì„¤ì •ë˜ì§€ ì•Šì€ ê²½ìš° ê²½ê³ 
if (typeof window !== 'undefined' && (!SUPABASE_URL || !SUPABASE_PUBLISHABLE_KEY)) {
  console.warn(
    'âš ï¸ Supabase í™˜ê²½ ë³€ìˆ˜ê°€ ì„¤ì •ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.',
    '\nVercel í”„ë¡œì íŠ¸ ì„¤ì •ì—ì„œ ë‹¤ìŒ í™˜ê²½ ë³€ìˆ˜ë¥¼ ì¶”ê°€í•˜ì„¸ìš”:',
    '\nNEXT_PUBLIC_SUPABASE_URL=your-project-url',
    '\nNEXT_PUBLIC_SUPABASE_PUBLISHABLE_KEY=your-anon-key',
    '\n\nâš ï¸ ì¤‘ìš”: í™˜ê²½ ë³€ìˆ˜ë¥¼ ì¶”ê°€í•œ í›„ ë°˜ë“œì‹œ "Redeploy"ë¥¼ í•´ì•¼ í•©ë‹ˆë‹¤!'
  );
}

// í™˜ê²½ ë³€ìˆ˜ê°€ ì—†ìœ¼ë©´ ì—ëŸ¬ë¥¼ ë°œìƒì‹œí‚¤ì§€ ì•Šê³ , ëª…í™•í•œ ë©”ì‹œì§€ í‘œì‹œ
let supabaseClient: ReturnType<typeof createClient<Database>>;

if (!SUPABASE_URL || !SUPABASE_PUBLISHABLE_KEY) {
  console.error("âŒ Supabase í™˜ê²½ ë³€ìˆ˜ê°€ ì„¤ì •ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤!");
  console.error("Vercel í”„ë¡œì íŠ¸ ì„¤ì •ì—ì„œ ë‹¤ìŒ í™˜ê²½ ë³€ìˆ˜ë¥¼ ì¶”ê°€í•˜ì„¸ìš”:");
  console.error("  - NEXT_PUBLIC_SUPABASE_URL");
  console.error("  - NEXT_PUBLIC_SUPABASE_PUBLISHABLE_KEY");
  
  // ë”ë¯¸ í´ë¼ì´ì–¸íŠ¸ë¥¼ ìƒì„±í•˜ë˜, ì‹¤ì œ ì‚¬ìš© ì‹œ ì—ëŸ¬ë¥¼ ëª…í™•íˆ í‘œì‹œ
  const dummyUrl = 'https://placeholder.supabase.co';
  const dummyKey = 'placeholder-key';
  
  supabaseClient = createClient<Database>(dummyUrl, dummyKey, {
    auth: {
      storage: typeof window !== 'undefined' ? window.localStorage : undefined,
      persistSession: true,
      autoRefreshToken: true,
    }
  });
  
  // í™˜ê²½ ë³€ìˆ˜ê°€ ì—†ì„ ë•ŒëŠ” ëª¨ë“  ìš”ì²­ì„ ì°¨ë‹¨
  const originalFrom = supabaseClient.from.bind(supabaseClient);
  supabaseClient.from = function(table: any) {
    console.error(`âŒ Supabase í™˜ê²½ ë³€ìˆ˜ê°€ ì„¤ì •ë˜ì§€ ì•Šì•„ "${table}" í…Œì´ë¸”ì— ì ‘ê·¼í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.`);
    throw new Error('Supabase í™˜ê²½ ë³€ìˆ˜ê°€ ì„¤ì •ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤. Vercel í”„ë¡œì íŠ¸ ì„¤ì •ì—ì„œ í™˜ê²½ ë³€ìˆ˜ë¥¼ ì¶”ê°€í•˜ì„¸ìš”.');
  } as any;
  
  // auth ë©”ì„œë“œë„ ì°¨ë‹¨
  const originalAuth = supabaseClient.auth;
  supabaseClient.auth = {
    ...originalAuth,
    signInWithPassword: async () => {
      throw new Error('Supabase í™˜ê²½ ë³€ìˆ˜ê°€ ì„¤ì •ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤. Vercel í”„ë¡œì íŠ¸ ì„¤ì •ì—ì„œ í™˜ê²½ ë³€ìˆ˜ë¥¼ ì¶”ê°€í•˜ì„¸ìš”.');
    },
    signUp: async () => {
      throw new Error('Supabase í™˜ê²½ ë³€ìˆ˜ê°€ ì„¤ì •ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤. Vercel í”„ë¡œì íŠ¸ ì„¤ì •ì—ì„œ í™˜ê²½ ë³€ìˆ˜ë¥¼ ì¶”ê°€í•˜ì„¸ìš”.');
    },
    signOut: async () => {
      throw new Error('Supabase í™˜ê²½ ë³€ìˆ˜ê°€ ì„¤ì •ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤. Vercel í”„ë¡œì íŠ¸ ì„¤ì •ì—ì„œ í™˜ê²½ ë³€ìˆ˜ë¥¼ ì¶”ê°€í•˜ì„¸ìš”.');
    },
    getSession: async () => {
      return { data: { session: null }, error: null };
    },
    getUser: async () => {
      return { data: { user: null }, error: null };
    },
    onAuthStateChange: () => {
      return { data: { subscription: { unsubscribe: () => {} } } };
    },
  } as any;
} else {
  // í™˜ê²½ ë³€ìˆ˜ê°€ ì •ìƒì ìœ¼ë¡œ ì„¤ì •ëœ ê²½ìš°
  supabaseClient = createClient<Database>(SUPABASE_URL, SUPABASE_PUBLISHABLE_KEY, {
    auth: {
      storage: typeof window !== 'undefined' ? window.localStorage : undefined,
      persistSession: true,
      autoRefreshToken: true,
    }
  });
  
  // í´ë¼ì´ì–¸íŠ¸ ì´ˆê¸°í™” í™•ì¸ (ê°œë°œ í™˜ê²½ì—ì„œë§Œ)
  if (typeof window !== 'undefined' && process.env.NODE_ENV === 'development') {
    console.log("âœ… Supabase í´ë¼ì´ì–¸íŠ¸ ì´ˆê¸°í™” ì™„ë£Œ");
  }
}

export const supabase = supabaseClient;
